## 要件定義書

### 1. 目的

* 2019年と2024年の同一月における国別旅行者数の増減を可視化し、年をまたいだトレンド分析を支援する。

### 2. 対象範囲

* データ：観光庁「宿泊旅行統計調査」の国別月次旅行者数（2019年1月～12月、2024年1月～12月）
* 比較対象：2019年 vs 2024年、同月比較

### 3. 対象ユーザー

* 自治体・DMOの観光振興担当者
* 旅行代理店・宿泊施設運営者のマーケティング担当者
* 観光コンサルタント

### 4. 前提条件

* 2019年と2024年分の月別国別旅行者数データが揃っていること
* 国名は統一フォーマット（日本語 or 英語）で管理
* 欠損値は0または直近値で補完

### 5. 機能要件

#### 5.1 テーブル表示

* **カラム**

  * 月（1～12）
  * 国名
  * 2019年旅行者数
  * 2024年旅行者数
  * 差分（2024 − 2019）
  * 増減率（(2024 − 2019) ÷ 2019 × 100%）

* **操作**
  * ソート：差分大→小、増減率大→小、国名順、月順
  * ページネーション（例：50件／ページ）

#### 5.2 折れ線グラフ比較

* **表示内容**
  * 選択国の2019年／2024年月別旅行者数
* **UI要素**
  * 二系列折れ線グラフ（2019年：破線、2024年：実線）
  * ホバー時にツールチップで数値表示
  * 国選択：チェックボックス or ドロップダウン
  * 月範囲スライダー

#### 5.3 ヒートマップ表示

* **軸**
  * 縦軸：国
  * 横軸：月（1～12）
* **セル値**
  * 差分 or 増減率を選択可能
* **カラー**
  * 増加（正）：青系
  * 減少（負）：赤系
  * 中立：白～灰系
* **付帯機能**
  * カラーバー表示
  * セルクリックで該当国・月の詳細モーダル表示

#### 5.4 フィルタ・検索

* 国名検索：インクリメンタルサーチ
* 上位N抽出：差分／増減率の上位N国を自動抽出（Nはユーザー指定）
* 月選択：特定月のみ表示

### 6. 非機能要件

* **レスポンス**
  * テーブル表示：1秒以内
  * グラフ更新：2秒以内
* **同時利用**：100ユーザー想定
* **対応ブラウザ**：Chrome／Safari／Edge 最新版
* **モバイル対応**：将来的に対応検討

### 7. 技術スタック（推奨）

* **フロントエンド**：Next.js + React + TypeScript
* **グラフライブラリ**：D3.js または Chart.js
* **バックエンド**：Node.js (Express) or Python (FastAPI)
* **データベース**：PostgreSQL,Prism
* **インフラ**：Vercel